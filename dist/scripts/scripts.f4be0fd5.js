"use strict";angular.module("loktraApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$locationProvider",function(a,b){b.html5Mode(!1).hashPrefix(""),a.when("/",{templateUrl:"views/product.html",controller:"ProductCtrl",controllerAs:"product"}).when("/donation",{templateUrl:"views/donation.html",controller:"DonationCtrl",controllerAs:"donation"}).otherwise({redirectTo:"/"})}]),angular.module("loktraApp").controller("ProductCtrl",["$scope","cart","$location",function(a,b,c){var d=a;d.showError=!1,d.itemObject=b.getCart(),d.goTODonationPage=function(){c.url("donation")},d.addItem=function(){d.itemObject=JSON.parse(JSON.stringify(b.addItem()))},d.removeItem=function(a){d.itemObject=JSON.parse(JSON.stringify(b.remove(a)))},d.ClearCart=function(){d.itemObject=JSON.parse(JSON.stringify(b.clear()))},d.qtyChange=function(){b.changeQuantity(d.itemObject)?d.showError=!1:d.showError=!0},d.total=function(){var a=0;return d.itemObject&&angular.forEach(d.itemObject.items,function(b){a+=b.qty*b.cost}),a}}]),angular.module("loktraApp").controller("DonationCtrl",["$scope",function(a){var b=a;b.neededAmt=167,b.amtToPay=50,b.addValue=function(){var a=parseFloat(document.getElementById("amt").value)/10,c=0,d=document.getElementById("barId");if(d.style.width)b.neededAmt>50?(b.neededAmt=b.neededAmt-10*a,b.neededAmt<50&&(b.amtToPay=b.neededAmt),c=parseFloat(d.style.width.split("%")[0]),c+=a,d.style.width=c+"%"):(a=parseInt(document.getElementById("amt").value),b.neededAmt=b.neededAmt-a,b.amtToPay=b.neededAmt,c=parseFloat(d.style.width.split("%")[0]),c+=a/10,d.style.width=c+"%");else{var e=83.3;b.neededAmt=b.neededAmt-10*a,d.style.width=e+a+"%"}},b.showMessage=function(){$("#dialogBox").css("display","block")},b.closeDialogBox=function(){$("#dialogBox").css("display","none")},window.onclick=function(a){"X"==a.target.innerText&&$("#dialogBox").css("display","none")},b.sharePost=function(){var a="http://loktra.com",b="Yay, I donated!";window.open("http://twitter.com/share?url="+encodeURIComponent(a)+"&text="+encodeURIComponent(b)),window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(a)+"&description="+encodeURIComponent(b))}}]),angular.module("loktraApp").service("cart",function(){var a=function(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=0;5>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},b={items:[]},c=function(){localStorage.setItem("cart",angular.toJson(b))};this.getCart=function(){return JSON.parse(localStorage.getItem("cart"))},this.addItem=function(){return b=this.getCart(),b||(b={items:[]}),b.items.push({qty:1,description:a(),cost:Math.floor(10+900*Math.random()),id:b.items.length}),c(),b},this.remove=function(a){for(var d=this.getCart(),e=0;e<d.items.length;e++)d.items[e].id===a&&(d.items.splice(e,1),e--);return b=angular.copy(d),c(),d},this.clear=function(){return localStorage.removeItem("cart"),b={items:[]}},this.persist=function(a){for(var b=!0,c=0;c<a.items.length;c++)(!a.items[c].qty||isNaN(a.items[c].qty)||a.items[c].qty<1)&&(b=!1);return b?a:b},this.changeQuantity=function(a){return this.persist(a)?(b=angular.copy(a),c(),b):!1}}),angular.module("loktraApp").run(["$templateCache",function(a){a.put("views/donation.html",'<!DOCTYPE html> <html> <head> <title>Donation Page</title> </head> <body> <div class="mainDiv"> <div class="TitleBar"> <span>{{ neededAmt| currency:"$":0}} still needed for this project</span> </div> <div class="downArrow"></div> <div class="contentBody"> <div class="progressBar"> <div id="barId" class="barCss"></div> </div> <div class="contents"> <p><span class="textColor">Only 3 days left</span> to fund this project.</p> <p>Join the 42 other donors who have already supported this project. Every dollar helps.</p> </div> <div class="buttonInput"> <div class="paySection"> <input id="amt" value="{{amtToPay}}" disabled type="text"> <span>$</span> </div> <div class="paySection"> <button ng-click="addValue()">Give Now</button> </div> </div> <span class="alignSpan" ng-show="amtToPay"><a href="">Why give ${{amtToPay}}?</a></span> </div> <div class="footerButton"> <div class="saveShareCss"> <button ng-click="showMessage()">Save for Later</button> </div> <div class="saveShareCss"> <button ng-click="sharePost()">Tell Your Friends</button> </div> </div> <div class="modal" id="dialogBox"> <div class="modalContent"> <span class="close">X</span> <p>Saved!</p> </div> </div> </div> </body> </html>'),a.put("views/product.html",'<h2>Cart Example <a href ng-click="goTODonationPage()" class="btn btn-small">GO TO DONATION PAGE</a></h2> <div> <div ng-show="showError" class="alert alert-danger"> <strong>Please select Correct value</strong> </div> <table class="table"> <tr> <th>Description</th> <th>Qty</th> <th>Cost</th> <th>Total</th> <th></th> </tr> <tr ng-repeat="item in itemObject.items"> <td>{{item.description}}</td> <td><input type="number" ng-change="qtyChange()" ng-model="item.qty" min="1" required class="input-mini"></td> <td>{{item.cost | currency:\'&#8377;\'}}</td> <td>{{item.qty * item.cost | currency:\'&#8377;\'}}</td> <td> [<a href ng:click="removeItem(item.id)">X</a>] </td> </tr> <tr> <td><a href ng-click="addItem()" class="btn btn-small">add item</a></td> <td></td> <td>Total:</td> <td>{{total() | currency:\'&#8377;\'}}</td> </tr> <tr ng-show="itemObject.items.length !=\'0\'"> <td><a href ng-click="ClearCart()" class="btn btn-small">Clear Cart</a></td> </tr> </table> </div>')}]);